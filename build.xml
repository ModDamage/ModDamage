<?xml version="1.0" encoding="UTF-8"?>
<project name="ModDamage" default="jar" basedir=".">
	<target name="clean">
		<delete dir="bin"/>
	</target>

	<target name="build" description="compile the source">
		<mkdir dir="bin"/>
		<javac srcdir="src" destdir="bin" includeantruntime="false" encoding="UTF-8">
			<compilerarg value="-Xlint"/>
			<classpath>
				<fileset dir="resource">
					<include name="*.jar"/>
				</fileset>
			</classpath>
		</javac>
		<copy todir="bin" overwrite="true" >
			<fileset dir="web" includes="**/*.*"/>
		</copy>
		
		<replaceregexp flags="gm" match='(&lt;(?:link|script) (?:href|src)=")\.?(.*&gt;)' replace="\1/static\2">
			<fileset dir="bin" includes="**/*.html"/>
		</replaceregexp>
		
		<replaceregexp flags="gm" match="(templateUrl: ')\.?(.*)'" replace="\1/static\2">
			<fileset dir="bin" includes="**/app.js"/>
		</replaceregexp>
		
	</target>

	<target name="jar" depends="build">
		<jar destfile="ModDamage.jar" update="no">
			<fileset dir="bin" />
			<fileset dir="." includes="plugin.yml" />
		</jar>
	</target>
</project>
